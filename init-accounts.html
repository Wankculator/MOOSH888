<\!DOCTYPE html>
<html>
<head>
    <title>Initialize Multi-Wallet Accounts</title>
</head>
<body>
    <h1>Initialize Multi-Wallet Accounts</h1>
    <button onclick="initAccounts()">Initialize Accounts from Existing Wallet</button>
    <pre id="result"></pre>
    
    <script>
        function initAccounts() {
            // Get existing wallet data
            const sparkWallet = localStorage.getItem('sparkWallet');
            const generatedSeed = localStorage.getItem('generatedSeed') || localStorage.getItem('importedSeed');
            
            if (\!sparkWallet) {
                document.getElementById('result').textContent = 'No wallet found\! Generate a wallet first.';
                return;
            }
            
            const walletData = JSON.parse(sparkWallet);
            
            // Create accounts array with first account
            const account1 = {
                id: 'account-' + Date.now(),
                name: 'Account 1',
                addresses: walletData.addresses,
                privateKeys: walletData.privateKeys,
                createdAt: new Date().toISOString(),
                isActive: true,
                balance: { confirmed: 0, unconfirmed: 0 }
            };
            
            // Create second account (demo)
            const account2 = {
                id: 'account-' + (Date.now() + 1),
                name: 'Account 2',
                addresses: walletData.addresses, // In real app, would derive new addresses
                privateKeys: walletData.privateKeys,
                createdAt: new Date().toISOString(),
                isActive: true,
                balance: { confirmed: 0, unconfirmed: 0 }
            };
            
            const accounts = [account1, account2];
            
            // Save to localStorage
            localStorage.setItem('mooshAccounts', JSON.stringify(accounts));
            localStorage.setItem('mooshCurrentAccountId', account1.id);
            localStorage.setItem('mooshActiveAccounts', JSON.stringify([account1.id, account2.id]));
            
            // Also ensure multi-wallet is enabled
            localStorage.setItem('enableMultiWallet', 'true');
            localStorage.setItem('walletMode', 'multi');
            
            document.getElementById('result').textContent = 'Accounts initialized\! Refresh the wallet page to see the dropdown.';
        }
    </script>
</body>
</html>
EOF < /dev/null
