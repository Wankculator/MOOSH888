<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOOSH Wallet - Multi-Currency Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            color: #f57315;
            font-family: 'Courier New', monospace;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            color: #f57315;
            border-bottom: 2px solid #f57315;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        .currency-demo {
            background: #111;
            border: 2px solid #333;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .balance-display {
            text-align: center;
            padding: 30px;
            background: #000;
            border: 2px solid #f57315;
            margin-bottom: 20px;
        }
        
        .btc-balance {
            font-size: 32px;
            font-weight: bold;
            color: #f57315;
            margin-bottom: 10px;
        }
        
        .fiat-balance {
            font-size: 18px;
            color: #888;
        }
        
        .currency-selector {
            text-align: center;
            margin-bottom: 30px;
        }
        
        select {
            background: #000;
            border: 2px solid #f57315;
            color: #f57315;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            font-family: inherit;
            outline: none;
            transition: all 0.2s ease;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23f57315' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 20px;
            padding-right: 45px;
        }
        
        select:hover {
            border-color: #ff8c42;
            color: #ff8c42;
        }
        
        select:focus {
            border-color: #ff8c42;
            box-shadow: 0 0 0 2px rgba(245, 115, 21, 0.2);
        }
        
        select option {
            background: #000;
            color: #f57315;
            padding: 10px;
        }
        
        select option:hover,
        select option:checked {
            background: #1a1a1a;
            color: #ff8c42;
        }
        
        .currency-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        
        .currency-card {
            background: #111;
            border: 1px solid #333;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .currency-card:hover {
            border-color: #f57315;
            background: #1a1a1a;
        }
        
        .currency-card.selected {
            border-color: #f57315;
            background: #1a1a1a;
        }
        
        .currency-symbol {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .currency-code {
            font-size: 14px;
            color: #888;
        }
        
        .currency-value {
            font-size: 16px;
            color: #f57315;
            margin-top: 5px;
        }
        
        .status {
            padding: 10px;
            margin: 10px 0;
            background: #111;
            border-left: 3px solid #333;
        }
        
        .status.success {
            border-left-color: #4CAF50;
        }
        
        .status.loading {
            border-left-color: #ff8c42;
        }
        
        .status.error {
            border-left-color: #ff4444;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>[MOOSH] Multi-Currency Balance Display</h1>
        
        <div class="currency-demo">
            <h2>Balance Display Demo</h2>
            
            <div class="balance-display">
                <div class="btc-balance" id="btc-balance">0.12345678 BTC</div>
                <div class="fiat-balance" id="fiat-balance">Loading...</div>
            </div>
            
            <div class="currency-selector">
                <label>Select Currency: </label>
                <select id="currency-select" onchange="changeCurrency(this.value)">
                    <option value="usd">$ USD - US Dollar</option>
                    <option value="eur">€ EUR - Euro</option>
                    <option value="gbp">£ GBP - British Pound</option>
                    <option value="jpy">¥ JPY - Japanese Yen</option>
                    <option value="cad">C$ CAD - Canadian Dollar</option>
                    <option value="aud">A$ AUD - Australian Dollar</option>
                    <option value="chf">Fr CHF - Swiss Franc</option>
                    <option value="cny">¥ CNY - Chinese Yuan</option>
                    <option value="inr">₹ INR - Indian Rupee</option>
                    <option value="krw">₩ KRW - South Korean Won</option>
                    <option value="brl">R$ BRL - Brazilian Real</option>
                    <option value="mxn">Mex$ MXN - Mexican Peso</option>
                    <option value="rub">₽ RUB - Russian Ruble</option>
                    <option value="zar">R ZAR - South African Rand</option>
                    <option value="aed">د.إ AED - UAE Dirham</option>
                    <option value="sgd">S$ SGD - Singapore Dollar</option>
                    <option value="hkd">HK$ HKD - Hong Kong Dollar</option>
                    <option value="nzd">NZ$ NZD - New Zealand Dollar</option>
                    <option value="sek">kr SEK - Swedish Krona</option>
                    <option value="nok">kr NOK - Norwegian Krone</option>
                    <option value="try">₺ TRY - Turkish Lira</option>
                    <option value="thb">฿ THB - Thai Baht</option>
                    <option value="pln">zł PLN - Polish Złoty</option>
                    <option value="php">₱ PHP - Philippine Peso</option>
                    <option value="idr">Rp IDR - Indonesian Rupiah</option>
                </select>
            </div>
            
            <div id="status" class="status loading">Fetching exchange rates...</div>
        </div>
        
        <div class="currency-demo">
            <h2>Quick Currency Selection</h2>
            <div class="currency-grid" id="currency-grid">
                <!-- Currency cards will be populated here -->
            </div>
        </div>
        
        <div class="currency-demo">
            <h2>All Currency Values</h2>
            <div id="all-currencies" style="max-height: 400px; overflow-y: auto;">
                <!-- All currency values will be displayed here -->
            </div>
        </div>
    </div>
    
    <script>
        // Sample BTC balance
        const BTC_BALANCE = 0.12345678;
        
        // Currency data
        const currencies = {
            usd: { symbol: '$', name: 'US Dollar' },
            eur: { symbol: '€', name: 'Euro' },
            gbp: { symbol: '£', name: 'British Pound' },
            jpy: { symbol: '¥', name: 'Japanese Yen' },
            cad: { symbol: 'C$', name: 'Canadian Dollar' },
            aud: { symbol: 'A$', name: 'Australian Dollar' },
            chf: { symbol: 'Fr', name: 'Swiss Franc' },
            cny: { symbol: '¥', name: 'Chinese Yuan' },
            inr: { symbol: '₹', name: 'Indian Rupee' },
            krw: { symbol: '₩', name: 'South Korean Won' },
            brl: { symbol: 'R$', name: 'Brazilian Real' },
            mxn: { symbol: 'Mex$', name: 'Mexican Peso' },
            rub: { symbol: '₽', name: 'Russian Ruble' },
            zar: { symbol: 'R', name: 'South African Rand' },
            aed: { symbol: 'د.إ', name: 'UAE Dirham' },
            sgd: { symbol: 'S$', name: 'Singapore Dollar' },
            hkd: { symbol: 'HK$', name: 'Hong Kong Dollar' },
            nzd: { symbol: 'NZ$', name: 'New Zealand Dollar' },
            sek: { symbol: 'kr', name: 'Swedish Krona' },
            nok: { symbol: 'kr', name: 'Norwegian Krone' },
            try: { symbol: '₺', name: 'Turkish Lira' },
            thb: { symbol: '฿', name: 'Thai Baht' },
            pln: { symbol: 'zł', name: 'Polish Złoty' },
            php: { symbol: '₱', name: 'Philippine Peso' },
            idr: { symbol: 'Rp', name: 'Indonesian Rupiah' }
        };
        
        let btcPrices = {};
        let selectedCurrency = localStorage.getItem('selectedCurrency') || 'usd';
        
        // Format currency value
        function formatCurrencyValue(value, currency) {
            const noDecimalCurrencies = ['jpy', 'krw', 'idr', 'vnd'];
            
            if (noDecimalCurrencies.includes(currency)) {
                return Math.round(value).toLocaleString();
            }
            
            return value.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        }
        
        // Fetch BTC prices
        async function fetchBTCPrices() {
            const statusEl = document.getElementById('status');
            statusEl.className = 'status loading';
            statusEl.textContent = 'Fetching exchange rates...';
            
            try {
                const currencyList = Object.keys(currencies).join(',');
                const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=${currencyList}`);
                const data = await response.json();
                
                if (data.bitcoin) {
                    btcPrices = data.bitcoin;
                    statusEl.className = 'status success';
                    statusEl.textContent = `Exchange rates updated at ${new Date().toLocaleTimeString()}`;
                    
                    updateDisplay();
                    createCurrencyGrid();
                    displayAllCurrencies();
                } else {
                    throw new Error('Invalid response from API');
                }
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = `Error: ${error.message}`;
                
                // Use fallback prices
                btcPrices = {
                    usd: 40000,
                    eur: 37000,
                    gbp: 32000,
                    jpy: 5500000,
                    cad: 50000,
                    aud: 55000
                };
                updateDisplay();
            }
        }
        
        // Update display with selected currency
        function updateDisplay() {
            const fiatEl = document.getElementById('fiat-balance');
            const selectEl = document.getElementById('currency-select');
            
            selectEl.value = selectedCurrency;
            
            const price = btcPrices[selectedCurrency] || 0;
            const value = BTC_BALANCE * price;
            const currencyInfo = currencies[selectedCurrency];
            
            fiatEl.textContent = `≈ ${currencyInfo.symbol}${formatCurrencyValue(value, selectedCurrency)} ${selectedCurrency.toUpperCase()}`;
        }
        
        // Change currency
        function changeCurrency(currency) {
            selectedCurrency = currency;
            localStorage.setItem('selectedCurrency', currency);
            updateDisplay();
            updateCurrencyGrid();
        }
        
        // Create currency grid
        function createCurrencyGrid() {
            const gridEl = document.getElementById('currency-grid');
            gridEl.innerHTML = '';
            
            const popularCurrencies = ['usd', 'eur', 'gbp', 'jpy', 'cad', 'aud', 'chf', 'cny'];
            
            popularCurrencies.forEach(code => {
                const info = currencies[code];
                const price = btcPrices[code] || 0;
                const value = BTC_BALANCE * price;
                
                const card = document.createElement('div');
                card.className = 'currency-card';
                if (code === selectedCurrency) {
                    card.classList.add('selected');
                }
                
                card.innerHTML = `
                    <div class="currency-symbol">${info.symbol}</div>
                    <div class="currency-code">${code.toUpperCase()}</div>
                    <div class="currency-value">${formatCurrencyValue(value, code)}</div>
                `;
                
                card.onclick = () => changeCurrency(code);
                gridEl.appendChild(card);
            });
        }
        
        // Update currency grid selection
        function updateCurrencyGrid() {
            document.querySelectorAll('.currency-card').forEach((card, index) => {
                const popularCurrencies = ['usd', 'eur', 'gbp', 'jpy', 'cad', 'aud', 'chf', 'cny'];
                if (popularCurrencies[index] === selectedCurrency) {
                    card.classList.add('selected');
                } else {
                    card.classList.remove('selected');
                }
            });
        }
        
        // Display all currency values
        function displayAllCurrencies() {
            const containerEl = document.getElementById('all-currencies');
            containerEl.innerHTML = '<table style="width: 100%; border-collapse: collapse;">';
            
            let html = '<tr><th style="text-align: left; padding: 10px; border-bottom: 1px solid #333;">Currency</th>';
            html += '<th style="text-align: right; padding: 10px; border-bottom: 1px solid #333;">Value</th>';
            html += '<th style="text-align: right; padding: 10px; border-bottom: 1px solid #333;">1 BTC</th></tr>';
            
            Object.entries(currencies).forEach(([code, info]) => {
                const price = btcPrices[code] || 0;
                const value = BTC_BALANCE * price;
                
                html += `<tr style="border-bottom: 1px solid #222;">`;
                html += `<td style="padding: 8px;">${info.symbol} ${code.toUpperCase()} - ${info.name}</td>`;
                html += `<td style="text-align: right; padding: 8px; color: #f57315;">${info.symbol}${formatCurrencyValue(value, code)}</td>`;
                html += `<td style="text-align: right; padding: 8px; color: #666;">${info.symbol}${formatCurrencyValue(price, code)}</td>`;
                html += `</tr>`;
            });
            
            containerEl.innerHTML += html + '</table>';
        }
        
        // Initialize
        fetchBTCPrices();
        
        // Refresh every minute
        setInterval(fetchBTCPrices, 60000);
    </script>
</body>
</html>